stream create --name ingest-mur --definition "scan-for-mur-granules: file --dir=/vagrant/data/mur/ --mode=ref --pattern=*.nc --maxMessages=1 --fixedDelay=60 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=5184 | join-with-static-time: transform --expression=\"'time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';time:0:1,'))+';file://'+headers['absolutefilepath']\" | python-chain: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.kelvintocelsius.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=analysed_sst,LATITUDE=lat,LONGITUDE=lon,TIME=time,READER=GRIDTILE,TEMP_DIR=/tmp,STORED_VAR_NAME=sst --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=JPL-L4_GHRSST-SSTfnd-MUR-GLOB-v02.0-fv04.1' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name ingest-mur-clim --definition "scan-for-mur-clim-granules: file --dir=/vagrant/data/mur-clim/ --mode=ref --pattern=*.nc --maxMessages=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=5184 | join-with-static-time: transform --expression=\"'time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';time:0:1,'))+';file://'+headers['absolutefilepath']\" | python-chain: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.kelvintocelsius.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=analysed_sst,LATITUDE=lat,LONGITUDE=lon,TIME=time,READER=GRIDTILE,TEMP_DIR=/tmp,STORED_VAR_NAME=mean_sst --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | add-time: script --script=file:///home/vagrant/xd-nexus-shared/add-time-from-granulename.groovy --variables='regex=^mur_(\\d{3}),dateformat=DDD' | add-day-atr: script --script=file:///home/vagrant/xd-nexus-shared/add-day-of-year-attribute.groovy --variables='regex=^mur_(\\d{3})' | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=JPL-L4_GHRSST-SSTfnd-MUR-GLOB-v02.0-fv04.1_CLIM' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name ingest-modis --definition "scan-for-modis-granules: file --dir=/vagrant/data/modis/ --mode=ref --pattern=*.nc --maxMessages=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=4096 | join-with-path: transform --expression=\"payload.stream().collect(T(java.util.stream.Collectors).joining(';'))+';file://'+headers['absolutefilepath']\" | tile-reader: tcpshell --command='python -u -m nexusxd.tilereadingprocessor' --environment=VARIABLE=sst,LATITUDE=lat,LONGITUDE=lon,READER=GRIDTILE --bufferSize=1000000 --remoteReplyTimeout=1300000 | filter-empty: tcpshell --command='python -u -m nexusxd.emptytilefilter' --bufferSize=1000000 | tile-summary: tcpshell --command='python -u -m nexusxd.tilesumarizingprocessor' --environment=STORED_VAR_NAME=sst --bufferSize=1000000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | add-time: script --script=file:///home/vagrant/xd-nexus-shared/add-time-from-granulename.groovy --variables='regex=^.*(\d{7})\.,dateformat=yyyyDDD' | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=MODIS_L3_sst_4km' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name ingest-modis-clim --definition "scan-for-modisclim-granules: file --dir=/vagrant/data/modis-clim/ --mode=ref --pattern=*.nc --maxMessages=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=4096 | join-with-path: transform --expression=\"payload.stream().collect(T(java.util.stream.Collectors).joining(';'))+';file://'+headers['absolutefilepath']\" | tile-reader: tcpshell --command='python -u -m nexusxd.tilereadingprocessor' --environment=VARIABLE=sst,LATITUDE=lat,LONGITUDE=lon,READER=GRIDTILE,TEMP_DIR=/tmp --bufferSize=1000000 --remoteReplyTimeout=1300000 | tile-summary: tcpshell --command='python -u -m nexusxd.tilesumarizingprocessor' --bufferSize=1000000 --environment=STORED_VAR_NAME=mean_sst | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | add-time: script --script=file:///home/vagrant/xd-nexus-shared/add-time-from-granulename.groovy --variables='regex=^A(\\d{3})\\.,dateformat=DDD' |  add-day-atr: script --script=file:///home/vagrant/xd-nexus-shared/add-day-of-year-attribute.groovy --variables='regex=^A(\\d{3})\\.' | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=MODIS_L3m_CLIM' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name ingest-avhrr --definition "scan-for-avhrr-granules: file --dir=/vagrant/data/avhrr/ --mode=ref --pattern=*.nc --maxMessages=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=1296 | join-with-static-time: transform --expression=\"'time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';time:0:1,'))+';file://'+headers['absolutefilepath']\" | python-chain: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.kelvintocelsius.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=analysed_sst,LATITUDE=lat,LONGITUDE=lon,TIME=time,READER=GRIDTILE,TEMP_DIR=/tmp,STORED_VAR_NAME=analysed_sst --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=AVHRR_OI_L4_GHRSST_NCEI' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name ingest-avhrr-clim --definition "scan-for-avhrr-clim-granules: file --dir=/vagrant/data/avhrr-clim/ --mode=ref --pattern=*.nc --maxMessages=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=1296 | join-with-static-time: transform --expression=\"'time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';time:0:1,'))+';file://'+headers['absolutefilepath']\" | python-chain: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.kelvintocelsius.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=analysed_sst,META=analysed_sst_std,LATITUDE=lat,LONGITUDE=lon,TIME=time,READER=GRIDTILE,TEMP_DIR=/tmp,STORED_VAR_NAME=analysed_sst --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | add-time: script --script=file:///home/vagrant/xd-nexus-shared/add-time-from-granulename.groovy --variables='regex=^(\\d{3}),dateformat=DDD' | add-day-atr: script --script=file:///home/vagrant/xd-nexus-shared/add-day-of-year-attribute.groovy --variables='regex=^(\\d{3})' | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=AVHRR_OI_L4_GHRSST_NCEI_CLIM' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name "ingest-ascatb-u" --definition "scan-for-ascat-granules: file --dir=/vagrant/data/ascatb/ --mode=ref --pattern=*.nc --maxMessages=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=NUMROWS,NUMCELLS --sliceByDimension=NUMROWS | join-with-path: transform --expression=\"payload.stream().collect(T(java.util.stream.Collectors).joining(';'))+';file://'+headers['absolutefilepath']\" | python-chain: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_swath_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.winddirspeedtouv.transform:nexusxd.subtract180longitude.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=wind_speed,LATITUDE=lat,LONGITUDE=lon,TIME=time,META=wind_dir,READER=SWATHTILE,TEMP_DIR=/tmp,U_OR_V=u,STORED_VAR_NAME=wind_u --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy --variables='salt=wind_u' | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=ASCATB-L2-Coastal' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042 --insertBuffer=10"

stream create --name "ingest-ascatb-v" --definition "scan-for-ascat-granules: file --dir=/vagrant/data/ascatb/ --mode=ref --pattern=*.nc --maxMessages=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=NUMROWS,NUMCELLS --sliceByDimension=NUMROWS | join-with-path: transform --expression=\"payload.stream().collect(T(java.util.stream.Collectors).joining(';'))+';file://'+headers['absolutefilepath']\" | python-chain: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_swath_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.winddirspeedtouv.transform:nexusxd.subtract180longitude.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=wind_speed,LATITUDE=lat,LONGITUDE=lon,TIME=time,META=wind_dir,READER=SWATHTILE,TEMP_DIR=/tmp,U_OR_V=v,STORED_VAR_NAME=wind_u --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy --variables='salt=wind_u' | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=ASCATB-L2-Coastal' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042 --insertBuffer=10"

stream create --name ingest-trmm --definition "file --dir=/vagrant/data/trmm/ --mode=ref --pattern=*.nc | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=500 | join-with-static-time: transform --expression=\"'time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';time:0:1,'))+';file://'+headers['absolutefilepath']\" | tile-reader: tcpshell --command='python -u -m nexusxd.tilereadingprocessor' --environment=VARIABLE=TRMM_3B42_daily_precipitation_V7,LATITUDE=lat,LONGITUDE=lon,TIME=time,READER=GRIDTILE,TEMP_DIR=/tmp --bufferSize=1000000 --remoteReplyTimeout=1300000 | filter-empty: tcpshell --command='python -u -m nexusxd.emptytilefilter' --bufferSize=1000000 | tile-summary: tcpshell --command='python -u -m nexusxd.tilesumarizingprocessor' --bufferSize=1000000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=TRMM_3B42_daily' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name ingest-modis-aqua-aod-500 --definition "file --dir=/vagrant/data/modis_aqua_aod/ --mode=ref --pattern=*.nc | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=500 | join-with-static-time: transform --expression=\"'time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';time:0:1,'))+';file://'+headers['absolutefilepath']\" | tile-reader: tcpshell --command='python -u -m nexusxd.tilereadingprocessor' --environment=VARIABLE=MYD08_D3_6_Aerosol_Optical_Depth_Land_Ocean_Mean,LATITUDE=lat,LONGITUDE=lon,TIME=time,READER=GRIDTILE,TEMP_DIR=/tmp --bufferSize=1000000 --remoteReplyTimeout=1300000 | filter-empty: tcpshell --command='python -u -m nexusxd.emptytilefilter' --bufferSize=1000000 | tile-summary: tcpshell --command='python -u -m nexusxd.tilesumarizingprocessor' --bufferSize=1000000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=MODIS_AQUA_AOD_500' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name ingest-modis-aqua-aod-16 --definition "file --dir=/vagrant/data/modis_aqua_aod/ --mode=ref --pattern=*.nc | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=16 | join-with-static-time: transform --expression=\"'time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';time:0:1,'))+';file://'+headers['absolutefilepath']\" | tile-reader: tcpshell --command='python -u -m nexusxd.tilereadingprocessor' --environment=VARIABLE=MYD08_D3_6_Aerosol_Optical_Depth_Land_Ocean_Mean,LATITUDE=lat,LONGITUDE=lon,TIME=time,READER=GRIDTILE,TEMP_DIR=/tmp --bufferSize=1000000 --remoteReplyTimeout=1300000 | filter-empty: tcpshell --command='python -u -m nexusxd.emptytilefilter' --bufferSize=1000000 | tile-summary: tcpshell --command='python -u -m nexusxd.tilesumarizingprocessor' --bufferSize=1000000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=MODIS_AQUA_AOD_16' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name ingest-modis-terra-aod-500 --definition "file --dir=/vagrant/data/modis_terra_aod/ --mode=ref --pattern=*.nc | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=500 | join-with-static-time: transform --expression=\"'time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';time:0:1,'))+';file://'+headers['absolutefilepath']\" | tile-reader: tcpshell --command='python -u -m nexusxd.tilereadingprocessor' --environment=VARIABLE=MOD08_D3_6_Aerosol_Optical_Depth_Land_Ocean_Mean,LATITUDE=lat,LONGITUDE=lon,TIME=time,READER=GRIDTILE,TEMP_DIR=/tmp --bufferSize=1000000 --remoteReplyTimeout=1300000 | filter-empty: tcpshell --command='python -u -m nexusxd.emptytilefilter' --bufferSize=1000000 | tile-summary: tcpshell --command='python -u -m nexusxd.tilesumarizingprocessor' --bufferSize=1000000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=MODIS_TERRA_AOD_500' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name ingest-modis-terra-aod-16 --definition "file --dir=/vagrant/data/modis_terra_aod/ --mode=ref --pattern=*.nc | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=16 | join-with-static-time: transform --expression=\"'time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';time:0:1,'))+';file://'+headers['absolutefilepath']\" | tile-reader: tcpshell --command='python -u -m nexusxd.tilereadingprocessor' --environment=VARIABLE=MOD08_D3_6_Aerosol_Optical_Depth_Land_Ocean_Mean,LATITUDE=lat,LONGITUDE=lon,TIME=time,READER=GRIDTILE,TEMP_DIR=/tmp --bufferSize=1000000 --remoteReplyTimeout=1300000 | filter-empty: tcpshell --command='python -u -m nexusxd.emptytilefilter' --bufferSize=1000000 | tile-summary: tcpshell --command='python -u -m nexusxd.tilesumarizingprocessor' --bufferSize=1000000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=MODIS_TERRA_AOD_16' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name "ingest-smap-sss" --definition "scan-for-smap-granules: file --dir=/vagrant/data/smap/ --mode=ref --pattern=*.h5 --maxMessages=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=0,1 --sliceByDimension=1 | join-with-path: transform --expression=\"payload.stream().collect(T(java.util.stream.Collectors).joining(';'))+';file://'+headers['absolutefilepath']\" | tile-reader: tcpshell --command='python -u -m nexusxd.tilereadingprocessor' --environment=VARIABLE=smap_sss,LATITUDE=lat,LONGITUDE=lon,TIME=row_time,GLBLATTR_DAY=REV_START_TIME,GLBLATTR_DAY_FORMAT=%Y-%jT%H:%M:%S.%f,READER=SWATHTILE,TEMP_DIR=/tmp --bufferSize=1000000 --remoteReplyTimeout=1300000 | filter-empty: tcpshell --command='python -u -m nexusxd.emptytilefilter' --bufferSize=1000000 | tile-summary: tcpshell --command='python -u -m nexusxd.tilesumarizingprocessor' --bufferSize=1000000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=SMAP_L2B_SSS' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name ingest-grace --definition "scan-for-grace-granules: file --dir=/vagrant/data/grace/ --mode=ref --pattern=*.nc --maxMessages=1 --fixedDelay=60 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=1296 --splitResult=true | join-with-static-time: script --script=file:///home/vagrant/xd-nexus-shared/add-time-to-spatial-spec.groovy --variables='timelen=152' | tile-reader: tcpshell --command='python -u -m nexusxd.tilereadingprocessor' --environment=VARIABLE=lwe_thickness,LATITUDE=lat,LONGITUDE=lon,TIME=time,READER=GRIDTILE --bufferSize=1000000 --remoteReplyTimeout=1300000 | filter-empty: tcpshell --command='python -u -m nexusxd.emptytilefilter' --bufferSize=1000000 | subtract180: tcpshell --command='python -u -m nexusxd.subtract180longitude' --bufferSize=1000000 | normalize-time: tcpshell --command='python -u -m nexusxd.normalizetimebeginningofmonth' --bufferSize=1000000 | tile-summary: tcpshell --command='python -u -m nexusxd.tilesumarizingprocessor' --environment=STORED_VAR_NAME=lwe_thickness --bufferSize=1000000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=TELLUS_GRACE_MASCON_CRI_GRID_RL05_V2_OCEAN' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name ingest-ecco --definition "ecco: file --dir=/vagrant/data/ecco/ --mode=ref --pattern=*.nc --maxMessages=1 --fixedDelay=60 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=latitude,longitude --tilesDesired=500 --splitResult=true | join-with-static-time: script --script=file:///home/vagrant/xd-nexus-shared/add-time-to-spatial-spec.groovy --variables='timelen=240' | tile-reader: tcpshell --command='python -u -m nexusxd.tilereadingprocessor' --environment=VARIABLE=MXLDEPTH,LATITUDE=latitude,LONGITUDE=longitude,TIME=time,READER=GRIDTILE --bufferSize=1000000 --remoteReplyTimeout=1300000 | filter-empty: tcpshell --command='python -u -m nexusxd.emptytilefilter' --bufferSize=1000000 | normalize-time: tcpshell --command='python -u -m nexusxd.normalizetimebeginningofmonth' --bufferSize=1000000 | tile-summary: tcpshell --command='python -u -m nexusxd.tilesumarizingprocessor' --environment=STORED_VAR_NAME=MXLDEPTH --bufferSize=1000000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=MXLDEPTH_ECCO_version4_release1' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"


stream create --name "ingest-ccmp-u" --definition "scan-for-ccmp-granules: file --dir=/vagrant/data/ccmp/ --mode=ref --pattern=*.nc --maxMessages=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=latitude,longitude --tilesDesired=270 --splitResult=true | join-with-time-slice: script --script=file:///home/vagrant/xd-nexus-shared/add-time-to-spatial-spec.groovy --variables='timelen=4' | python-chain: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.computespeeddirfromuv.transform:nexusxd.subtract180longitude.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=uwnd,LATITUDE=latitude,LONGITUDE=longitude,TIME=time,META=vwnd,READER=GRIDTILE,TEMP_DIR=/tmp,WIND_U=uwnd,WIND_V=vwnd,STORED_VAR_NAME=wind_u --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy --variables='salt=wind_u' | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=CCMP_V2.0_L3.0' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042 --insertBuffer=75"

stream create --name "ingest-ccmp-spd" --definition "scan-for-ccmp-granules: file --dir=/vagrant/data/ccmp/ --mode=ref --pattern=*.nc --maxMessages=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=latitude,longitude --tilesDesired=270 --splitResult=true | join-with-time-slice: script --script=file:///home/vagrant/xd-nexus-shared/add-time-to-spatial-spec.groovy --variables='timelen=4' | python-chain: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.subtract180longitude.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=wind_speed,LATITUDE=latitude,LONGITUDE=longitude,TIME=time,READER=GRIDTILE,TEMP_DIR=/tmp,STORED_VAR_NAME=wind_speed --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy --variables='salt=wind_speed' | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=CCMP_V2.0_L3.0_WIND_SPEED' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042 --insertBuffer=75"

stream create --name "ingest-ccmp-spd-clim" --definition "scan-for-ccmp-clim-granules: file --dir=/vagrant/data/ccmp/climatology --mode=ref --pattern=*.nc --maxMessages=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=latitude,longitude --tilesDesired=270 --splitResult=true | join-with-time-slice: script --script=file:///home/vagrant/xd-nexus-shared/add-time-to-spatial-spec.groovy --variables='timelen=4' | python-chain: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.subtract180longitude.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=mean,META=stddev,LATITUDE=latitude,LONGITUDE=longitude,READER=GRIDTILE,TEMP_DIR=/tmp,STORED_VAR_NAME=mean_wind_speed --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy --variables='salt=wind_speed' | add-day-atr: script --script=file:///home/vagrant/xd-nexus-shared/add-day-of-year-attribute.groovy --variables='regex=^CCMP_Wind_Analysis_V02.0_L3.0_RSS_(\\d{3})_1day_clim_pixelMean' | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=CCMP_V2.0_L3.0_WIND_SPEED_CLIM' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042 --insertBuffer=75"



stream create --name "ingest-measures-ssh-native" --definition "scan-for-measures-granules: file --dir=/vagrant/data/measures_alt/ --mode=ref --pattern=ssh_grids*.nc --maxMessages=1 | to-filename: transform --expression=payload.absolutePath | permute-dimensions: tcpshell --command='python -u -m nexusxd.callncpdq' --environment=DIMENSION_ORDER=Time:Latitude:Longitude | file-ref: transform --expression=\"new java.io.File(new java.lang.String(payload))\" | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=Latitude,Longitude --tilesDesired=1296 | join-with-static-time: transform --expression=\"'Time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';Time:0:1,'))+';file://'+headers['absolutefilepath']\" | process-tiles: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.subtract180longitude.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=SLA,LATITUDE=Latitude,LONGITUDE=Longitude,TIME=Time,READER=GRIDTILE,TEMP_DIR=/tmp,STORED_VAR_NAME=SLA --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=MEASURES_SLA_JPL_1603' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name "ingest-measures-ssh-1x1monthly" --definition "scan-for-measures-granules: file --dir=/vagrant/data/measures_alt/ --mode=ref --pattern=avg-regrid1x1-ssh_grids*.nc --maxMessages=1 --fixedDelay=1 | to-filename: transform --expression=payload.absolutePath | permute-dimensions: tcpshell --command='python -u -m nexusxd.callncpdq' --environment=DIMENSION_ORDER=Time:Latitude:Longitude | file-ref: transform --expression=\"new java.io.File(new java.lang.String(payload))\" | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=Latitude,Longitude --tilesDesired=1296 | join-with-static-time: transform --expression=\"'Time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';Time:0:1,'))+';file://'+headers['absolutefilepath']\" | process-tiles: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.subtract180longitude.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=SLA,LATITUDE=Latitude,LONGITUDE=Longitude,TIME=Time,READER=GRIDTILE,TEMP_DIR=/tmp,STORED_VAR_NAME=SLA --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=MEASURES_SLA_JPL_1603_1x1Monthly' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name "ingest-measures-ssh-avg" --definition "scan-for-measures-granules: file --dir=/vagrant/data/measures_alt/ --mode=ref --pattern=avg-regrid1x1-ssh_grids*.nc --maxMessages=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=Latitude,Longitude --tilesDesired=1296 | join-with-static-time: transform --expression=\"'Time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';Time:0:1,'))+';file://'+headers['absolutefilepath']\" | process-tiles: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.subtract180longitude.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=SLA,LATITUDE=Latitude,LONGITUDE=Longitude,TIME=Time,READER=GRIDTILE,TEMP_DIR=/tmp,STORED_VAR_NAME=SLA --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=MEASURES_SLA_JPL_1603' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name "ingest-measures-ssh-clim" --definition "scan-for-measures-clim-granules: file --dir=/vagrant/data/measures_alt/climatology --mode=ref --pattern=ssh_grids*.nc --maxMessages=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=Latitude,Longitude --tilesDesired=1296 | join-with-static-time: transform --expression=\"'Time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';Time:0:1,'))+';file://'+headers['absolutefilepath']\" | process-tiles: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.subtract180longitude.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=mean,META=stddev,LATITUDE=Latitude,LONGITUDE=Longitude,READER=GRIDTILE,TEMP_DIR=/tmp,STORED_VAR_NAME=mean_SLA --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | add-time: script --script=file:///home/vagrant/xd-nexus-shared/add-time-from-granulename.groovy --variables='regex=^ssh_grids_v1609_(\\d{3})_5day_clim_pixelMean,dateformat=DDD' | add-day-atr: script --script=file:///home/vagrant/xd-nexus-shared/add-day-of-year-attribute.groovy --variables='regex=^ssh_grids_v1609_(\\d{3})_5day_clim_pixelMean' | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=MEASURES_SLA_JPL_1603_CLIM' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"


stream create --name "ingest-ice_shelf-1x1" --definition "scan-for-ice_shelf-granules: file --dir=/vagrant/data/ice_shelf/ --mode=ref --pattern=1x1regrid-ice_shelf_dh_v1.nc --maxMessages=1 --fixedDelay=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=4 | join-with-time-slice: script --script=file:///home/vagrant/xd-nexus-shared/add-time-to-spatial-spec.groovy --variables='timelen=72' | process-tiles: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.subtract180longitude.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=height_filt,LATITUDE=lat,LONGITUDE=lon,TIME=time,READER=GRIDTILE,TEMP_DIR=/tmp,STORED_VAR_NAME=height_filt --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=ICE_SHELF_DH_V1_1x1Monthly' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name ingest-modis-chl_a --definition "scan-for-chla-granules: file --dir=/vagrant/data/modis_aqua_chl --mode=ref --pattern=*.nc --maxMessages=2 --fixedDelay=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=1296 | join: transform --expression=\"payload.stream().collect(T(java.util.stream.Collectors).joining(';'))+';file://'+headers['absolutefilepath']\" | python-chain: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=chlor_a,LATITUDE=lat,LONGITUDE=lon,READER=GRIDTILE,TEMP_DIR=/tmp,STORED_VAR_NAME=chlor_a --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | add-time: script --script=file:///home/vagrant/xd-nexus-shared/add-time-from-granulename.groovy --variables='regex=^A(\\d{7}),dateformat=yyyyDDD' | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=MODIS_L3m_DAY_CHL_chlor_a_4km' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name ingest-modis-chl_a-clim --definition "scan-for-chla-clim-granules: file --dir=/vagrant/data/modis_aqua_chl/climatology --mode=ref --pattern=*.nc --maxMessages=2 --fixedDelay=1 | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=1296 | join: transform --expression=\"payload.stream().collect(T(java.util.stream.Collectors).joining(';'))+';file://'+headers['absolutefilepath']\" | python-chain: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=mean,META=stddev,LATITUDE=lat,LONGITUDE=lon,READER=GRIDTILE,TEMP_DIR=/tmp,STORED_VAR_NAME=mean_chlor_a --bufferSize=1000000 --remoteReplyTimeout=360000 | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | add-time: script --script=file:///home/vagrant/xd-nexus-shared/add-time-from-granulename.groovy --variables='regex=^A(\\d{3}),dateformat=DDD' | add-day-atr: script --script=file:///home/vagrant/xd-nexus-shared/add-day-of-year-attribute.groovy --variables='regex=^A(\\d{3})' | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=MODIS_L3m_DAY_CHL_chlor_a_4km_CLIM' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"



stream create --name ingest-smapl3 --definition "file --dir=/vagrant/data/smapl3/ --mode=ref --pattern=*.nc | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=500 | join-with-static-time: transform --expression=\"'time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';time:0:1,'))+';file://'+headers['absolutefilepath']\" | process-tiles: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.subtract180longitude.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=sss_smap,LATITUDE=lat,LONGITUDE=lon,TIME=time,READER=GRIDTILE,TEMP_DIR=/tmp --bufferSize=1000000 --remoteReplyTimeout=360000  | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=SMAP_SSS_L3_MONTHLY_500' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"

stream create --name ingest-smapl3-clim --definition "file --dir=/vagrant/sync/data/smapl3-clim/ --mode=ref --pattern=*.nc | header-absolutefilepath: header-enricher --headers={\"absolutefilepath\":\"payload\"} | dataset-tiler --dimensions=lat,lon --tilesDesired=500 | join-with-static-time: transform --expression=\"'time:0:1,'+payload.stream().collect(T(java.util.stream.Collectors).joining(';time:0:1,'))+';file://'+headers['absolutefilepath']\" | process-tiles: tcpshell --command='python -u -m nexusxd.processorchain' --environment=CHAIN=nexusxd.tilereadingprocessor.read_grid_data:nexusxd.emptytilefilter.filter_empty_tiles:nexusxd.subtract180longitude.transform:nexusxd.tilesumarizingprocessor.summarize_nexustile,VARIABLE=mean,META=stddev,LATITUDE=lat,LONGITUDE=lon,READER=GRIDTILE,TEMP_DIR=/tmp --bufferSize=1000000 --remoteReplyTimeout=360000  | add-id: script --script=file:///home/vagrant/xd-nexus-shared/generate-tile-id.groovy | add-day-atr: script --script=file:///home/vagrant/xd-nexus-shared/add-day-of-year-attribute.groovy --variables='regex=^sss_smap_L3m_clim_doy(\\d{3})' | set-dataset-name: script --script=file:///home/vagrant/xd-nexus-shared/set-dataset-name.groovy --variables='datasetname=SMAP_SSS_L3_MONTHLY_500_CLIM' | nexus --cassandraContactPoints=10.0.2.2 --cassandraKeyspace=nexustiles --solrUrl=http://10.0.2.2:8983/solr/ --solrCollection=nexustiles --cassandraPort=9042"



